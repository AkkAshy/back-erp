# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

## üéØ TL;DR

–í—ã–ø–æ–ª–Ω–∏ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:

```bash
# 1. –ê–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate  # –∏–ª–∏ source env/bin/activate

# 2. –°–æ–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations sales --name add_database_indexes

# 3. –ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# 4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã
python manage.py test sales

# –ì–æ—Ç–æ–≤–æ! ‚úÖ
```

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ?

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –≤ docstrings (sales/serializers.py)
- Race conditions –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ —Ç–æ–≤–∞—Ä–æ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–¥–∞–∂
- N+1 –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
- `@transaction.atomic` –¥–ª—è create/update
- `select_for_update()` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç race conditions
- –ò–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- `prefetch_related` –∏ `select_related` –≤ views

### ‚úÖ –£–ª—É—á—à–µ–Ω–æ
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ 85%
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production

---

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ü—Ä–æ–±–ª–µ–º–∞: Django –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
# –†–µ—à–µ–Ω–∏–µ: –∞–∫—Ç–∏–≤–∏—Ä—É–π venv
source venv/bin/activate
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
```bash
# –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
python manage.py showmigrations sales

# –û—Ç–∫–∞—Ç–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
python manage.py migrate sales <previous_migration>
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ
```bash
# –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
tail -f logs/django.log

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏ —Å debug
python manage.py runserver --verbosity 3
```

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏

- [MIGRATION_GUIDE.md](MIGRATION_GUIDE.md) - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [OPTIMIZATION_SUMMARY.md](OPTIMIZATION_SUMMARY.md) - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üí° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π:

```bash
# –û—Ç–∫—Ä–æ–π Django shell
python manage.py shell

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∏–Ω–¥–µ–∫—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç
from sales.models import SaleItem
from django.db import connection
from django.db.models import Prefetch

# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
from django.test.utils import override_settings
from django.db import reset_queries

# –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–æ–¥–∞–∂—É
# ... —Ç–≤–æ–π –∫–æ–¥ ...
```

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –∏ —Å–æ–∑–¥–∞–π –ø—Ä–æ–¥–∞–∂—É —á–µ—Ä–µ–∑ API!

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ! üéâ**
