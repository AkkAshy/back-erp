# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤ –¥–ª—è –ø–∞—Ä—Ç–∏–π

## –û–ø–∏—Å–∞–Ω–∏–µ

–ö–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—è —Ç–æ–≤–∞—Ä–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —à—Ç—Ä–∏—Ö–∫–æ–¥** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–∞—Ä—Ç–∏–∏ –ø–æ —à—Ç—Ä–∏—Ö–∫–æ–¥—É
- ‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–∏–∏ –ø—Ä–∏ –ø—Ä–∏—ë–º–∫–µ
- ‚úÖ –ü—Ä–æ–¥–∞–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ä—Ç–∏–∏
- ‚úÖ –í–µ—Å—Ç–∏ —É—á—ë—Ç –ø–æ FIFO/FEFO

---

## –§–æ—Ä–º–∞—Ç —à—Ç—Ä–∏—Ö–∫–æ–¥–∞ –ø–∞—Ä—Ç–∏–∏

```
BATCH-{timestamp}-{random}
```

### –ü—Ä–∏–º–µ—Ä—ã:

```
BATCH-20241215103045-A3F4B2C1
BATCH-20241215103046-D5E6F7G8
BATCH-20241215103047-H9I0J1K2
```

### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:

- `BATCH` - –ø—Ä–µ—Ñ–∏–∫—Å (–ø–∞—Ä—Ç–∏—è)
- `20241215103045` - timestamp (–≥–æ–¥-–º–µ—Å—è—Ü-–¥–µ–Ω—å-—á–∞—Å-–º–∏–Ω—É—Ç–∞-—Å–µ–∫—É–Ω–¥–∞)
- `A3F4B2C1` - —Å–ª—É—á–∞–π–Ω–∞—è —á–∞—Å—Ç—å (8 —Å–∏–º–≤–æ–ª–æ–≤)

---

## –ö–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è

–®—Ç—Ä–∏—Ö–∫–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–∞—Ä—Ç–∏–∏, –µ—Å–ª–∏ –æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ.

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

```json
POST /api/products/products/
{
  "name": "Coca Cola 1.5–ª",
  "category": 1,
  "unit": 1,
  "cost_price": "8000.00",
  "sale_price": "12000.00",
  "initial_quantity": "50.000"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ProductBatch —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –®—Ç—Ä–∏—Ö–∫–æ–¥ –ø–∞—Ä—Ç–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: `BATCH-20241215103045-A3F4B2C1`

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏–∏ –Ω–∞–ø—Ä—è–º—É—é

```json
POST /api/products/batches/
{
  "product": 123,
  "batch_number": "BATCH-001",
  "quantity": "100.000",
  "purchase_price": "8000.00"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –®—Ç—Ä–∏—Ö–∫–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: `BATCH-20241215103046-D5E6F7G8`

---

## –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à—Ç—Ä–∏—Ö–∫–æ–¥ –ø–∞—Ä—Ç–∏–∏

### 1. –ü—Ä–∏ –ø—Ä–∏—ë–º–∫–µ —Ç–æ–≤–∞—Ä–∞
–°–∫–∞–Ω–∏—Ä—É–µ–º —à—Ç—Ä–∏—Ö–∫–æ–¥ –ø–∞—Ä—Ç–∏–∏ ‚Üí –≤–∏–¥–∏–º –∫–∞–∫–∞—è –ø–∞—Ä—Ç–∏—è –ø–æ—Å—Ç—É–ø–∏–ª–∞

### 2. –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ
–ú–æ–∂–µ–º –ø—Ä–æ–¥–∞–≤–∞—Ç—å —Ç–æ–≤–∞—Ä —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ä—Ç–∏–∏ (FIFO/FEFO)

### 3. –ü—Ä–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
–°–∫–∞–Ω–∏—Ä—É–µ–º —à—Ç—Ä–∏—Ö–∫–æ–¥—ã –ø–∞—Ä—Ç–∏–π ‚Üí –≤–∏–¥–∏–º –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ –ø–∞—Ä—Ç–∏—è–º

### 4. –ü—Ä–∏ —Å–ø–∏—Å–∞–Ω–∏–∏
–°–ø–∏—Å—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–∞—Ä—Ç–∏–∏ (–ø–æ —Å—Ä–æ–∫—É –≥–æ–¥–Ω–æ—Å—Ç–∏)

---

## –ú–æ–¥–µ–ª—å ProductBatch

### –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ:

```python
class ProductBatch(models.Model):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è

    barcode = models.CharField(
        max_length=100,
        blank=True,
        verbose_name='–®—Ç—Ä–∏—Ö–∫–æ–¥ –ø–∞—Ä—Ç–∏–∏',
        help_text='–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏–∏'
    )

    def save(self, *args, **kwargs):
        """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —à—Ç—Ä–∏—Ö–∫–æ–¥–∞ –¥–ª—è –ø–∞—Ä—Ç–∏–∏"""
        if not self.barcode:
            import uuid
            from django.utils import timezone
            # –§–æ—Ä–º–∞—Ç: BATCH-{timestamp}-{random}
            timestamp = timezone.now().strftime('%Y%m%d%H%M%S')
            unique_part = uuid.uuid4().hex[:8].upper()
            self.barcode = f"BATCH-{timestamp}-{unique_part}"

        super().save(*args, **kwargs)
```

---

## API Response

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞:

```json
{
  "id": 123,
  "name": "Coca Cola 1.5–ª",
  "batches": [
    {
      "id": 456,
      "batch_number": "BATCH-D4E5F6G7",
      "barcode": "BATCH-20241215103045-A3F4B2C1",  ‚≠ê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
      "quantity": "50.000",
      "purchase_price": "8000.00",
      "received_at": "2024-12-15T10:30:45Z"
    }
  ]
}
```

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∞—Ä—Ç–∏–∏:

```json
{
  "id": 789,
  "product": 123,
  "batch_number": "BATCH-001",
  "barcode": "BATCH-20241215103046-D5E6F7G8",  ‚≠ê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
  "quantity": "100.000",
  "purchase_price": "8000.00",
  "expiry_date": "2025-12-31",
  "received_at": "2024-12-15T10:30:46Z"
}
```

---

## –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å

–®—Ç—Ä–∏—Ö–∫–æ–¥—ã –ø–∞—Ä—Ç–∏–π **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã** –±–ª–∞–≥–æ–¥–∞—Ä—è:

1. **Timestamp** - —Ç–æ—á–Ω–æ—Å—Ç—å –¥–æ —Å–µ–∫—É–Ω–¥—ã
2. **UUID** - 8 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (16^8 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)

–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏: **–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω—É–ª–µ–≤–∞—è**.

---

## –ü–µ—á–∞—Ç—å —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤

### –î–ª—è –ø–µ—á–∞—Ç–∏ —ç—Ç–∏–∫–µ—Ç–æ–∫:

```python
# –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä—Ç–∏—é
batch = ProductBatch.objects.get(id=456)

# –ò—Å–ø–æ–ª—å–∑—É–µ–º barcode –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
from barcode import Code128
from barcode.writer import ImageWriter

barcode_obj = Code128(batch.barcode, writer=ImageWriter())
filename = barcode_obj.save(f'batch_{batch.id}')
```

### –§–æ—Ä–º–∞—Ç –¥–ª—è –ø–µ—á–∞—Ç–∏:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë Coca Cola 1.5–ª           ‚ïë
‚ïë –ü–∞—Ä—Ç–∏—è: BATCH-001        ‚ïë
‚ïë ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ‚ñÉ  ‚ïë
‚ïë BATCH-20241215103045-... ‚ïë
‚ïë –°—Ä–æ–∫: 2025-12-31         ‚ïë
‚ïë –ö–æ–ª-–≤–æ: 50.000 —à—Ç        ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–∞

### –ü—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —à—Ç—Ä–∏—Ö–∫–æ–¥–∞ –ø–∞—Ä—Ç–∏–∏:

```python
# –°–∫–∞–Ω–µ—Ä —Å—á–∏—Ç—ã–≤–∞–µ—Ç: BATCH-20241215103045-A3F4B2C1

# –ü–æ–∏—Å–∫ –ø–∞—Ä—Ç–∏–∏
batch = ProductBatch.objects.filter(barcode='BATCH-20241215103045-A3F4B2C1').first()

if batch:
    print(f"–ü–∞—Ä—Ç–∏—è: {batch.batch_number}")
    print(f"–¢–æ–≤–∞—Ä: {batch.product.name}")
    print(f"–û—Å—Ç–∞—Ç–æ–∫: {batch.quantity}")
    print(f"–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏: {batch.expiry_date}")
else:
    print("–ü–∞—Ä—Ç–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
```

---

## –ú–∏–≥—Ä–∞—Ü–∏—è

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è `barcode` –≤ ProductBatch:

```bash
python manage.py makemigrations products
python manage.py migrate
```

---

## –ò—Ç–æ–≥–æ

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä—Ç–∏–π
‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
‚úÖ **–§–æ—Ä–º–∞—Ç** –ø–æ–Ω—è—Ç–Ω—ã–π –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** - –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!

–ö–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—è –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —à—Ç—Ä–∏—Ö–∫–æ–¥ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏! üöÄ
